"use strict";exports.id=978,exports.ids=[978],exports.modules={26978:(e,r,t)=>{t.r(r),t.d(r,{AbortError:()=>G,Blob:()=>J.YQ,FetchError:()=>h,File:()=>J.ZH,FormData:()=>f.fS,Headers:()=>U,Request:()=>D,Response:()=>H,blobFrom:()=>J.k4,blobFromSync:()=>J.F8,default:()=>Y,fileFrom:()=>J.NX,fileFromSync:()=>J._M,isRedirect:()=>C});var n=t(37067),o=t(44708),s=t(16141),i=t(57075),a=t(4573),l=t(57296),u=t(57975),c=t(11055),f=t(41130);class d extends Error{constructor(e,r){super(e),Error.captureStackTrace(this,this.constructor),this.type=r}get name(){return this.constructor.name}get[Symbol.toStringTag](){return this.constructor.name}}class h extends d{constructor(e,r,t){super(e,r),t&&(this.code=this.errno=t.code,this.erroredSysCall=t.syscall)}}let p=Symbol.toStringTag,y=e=>"object"==typeof e&&"function"==typeof e.append&&"function"==typeof e.delete&&"function"==typeof e.get&&"function"==typeof e.getAll&&"function"==typeof e.has&&"function"==typeof e.set&&"function"==typeof e.sort&&"URLSearchParams"===e[p],g=e=>e&&"object"==typeof e&&"function"==typeof e.arrayBuffer&&"string"==typeof e.type&&"function"==typeof e.stream&&"function"==typeof e.constructor&&/^(Blob|File)$/.test(e[p]),m=e=>"object"==typeof e&&("AbortSignal"===e[p]||"EventTarget"===e[p]),b=(e,r)=>{let t=new URL(r).hostname,n=new URL(e).hostname;return t===n||t.endsWith(`.${n}`)},w=(e,r)=>new URL(r).protocol===new URL(e).protocol,S=(0,u.promisify)(i.pipeline),T=Symbol("Body internals");class v{constructor(e,{size:r=0}={}){let t=null;null===e?e=null:y(e)?e=a.Buffer.from(e.toString()):g(e)||a.Buffer.isBuffer(e)||(u.types.isAnyArrayBuffer(e)?e=a.Buffer.from(e):ArrayBuffer.isView(e)?e=a.Buffer.from(e.buffer,e.byteOffset,e.byteLength):e instanceof i||(e instanceof f.fS?t=(e=(0,f.$n)(e)).type.split("=")[1]:e=a.Buffer.from(String(e))));let n=e;a.Buffer.isBuffer(e)?n=i.Readable.from(e):g(e)&&(n=i.Readable.from(e.stream())),this[T]={body:e,stream:n,boundary:t,disturbed:!1,error:null},this.size=r,e instanceof i&&e.on("error",e=>{let r=e instanceof d?e:new h(`Invalid response body while trying to fetch ${this.url}: ${e.message}`,"system",e);this[T].error=r})}get body(){return this[T].stream}get bodyUsed(){return this[T].disturbed}async arrayBuffer(){let{buffer:e,byteOffset:r,byteLength:t}=await E(this);return e.slice(r,r+t)}async formData(){let e=this.headers.get("content-type");if(e.startsWith("application/x-www-form-urlencoded")){let e=new f.fS;for(let[r,t]of new URLSearchParams(await this.text()))e.append(r,t);return e}let{toFormData:r}=await t.e(666).then(t.bind(t,85666));return r(this.body,e)}async blob(){let e=this.headers&&this.headers.get("content-type")||this[T].body&&this[T].body.type||"",r=await this.arrayBuffer();return new c.A([r],{type:e})}async json(){return JSON.parse(await this.text())}async text(){let e=await E(this);return new TextDecoder().decode(e)}buffer(){return E(this)}}async function E(e){if(e[T].disturbed)throw TypeError(`body used already for: ${e.url}`);if(e[T].disturbed=!0,e[T].error)throw e[T].error;let{body:r}=e;if(null===r||!(r instanceof i))return a.Buffer.alloc(0);let t=[],n=0;try{for await(let o of r){if(e.size>0&&n+o.length>e.size){let t=new h(`content size at ${e.url} over limit: ${e.size}`,"max-size");throw r.destroy(t),t}n+=o.length,t.push(o)}}catch(r){throw r instanceof d?r:new h(`Invalid response body while trying to fetch ${e.url}: ${r.message}`,"system",r)}if(!0===r.readableEnded||!0===r._readableState.ended)try{if(t.every(e=>"string"==typeof e))return a.Buffer.from(t.join(""));return a.Buffer.concat(t,n)}catch(r){throw new h(`Could not create Buffer from response body for ${e.url}: ${r.message}`,"system",r)}throw new h(`Premature close of server response while trying to fetch ${e.url}`)}v.prototype.buffer=(0,u.deprecate)(v.prototype.buffer,"Please use 'response.arrayBuffer()' instead of 'response.buffer()'","node-fetch#buffer"),Object.defineProperties(v.prototype,{body:{enumerable:!0},bodyUsed:{enumerable:!0},arrayBuffer:{enumerable:!0},blob:{enumerable:!0},json:{enumerable:!0},text:{enumerable:!0},data:{get:(0,u.deprecate)(()=>{},"data doesn't exist, use json(), text(), arrayBuffer(), or body instead","https://github.com/node-fetch/node-fetch/issues/1000 (response)")}});let P=(e,r)=>{let t,n,{body:o}=e[T];if(e.bodyUsed)throw Error("cannot clone body after it is used");return o instanceof i&&"function"!=typeof o.getBoundary&&(t=new i.PassThrough({highWaterMark:r}),n=new i.PassThrough({highWaterMark:r}),o.pipe(t),o.pipe(n),e[T].stream=t,o=n),o},R=(0,u.deprecate)(e=>e.getBoundary(),"form-data doesn't follow the spec and requires special treatment. Use alternative package","https://github.com/node-fetch/node-fetch/issues/1167"),L=(e,r)=>null===e?null:"string"==typeof e?"text/plain;charset=UTF-8":y(e)?"application/x-www-form-urlencoded;charset=UTF-8":g(e)?e.type||null:a.Buffer.isBuffer(e)||u.types.isAnyArrayBuffer(e)||ArrayBuffer.isView(e)?null:e instanceof f.fS?`multipart/form-data; boundary=${r[T].boundary}`:e&&"function"==typeof e.getBoundary?`multipart/form-data;boundary=${R(e)}`:e instanceof i?null:"text/plain;charset=UTF-8",B=e=>{let{body:r}=e[T];return null===r?0:g(r)?r.size:a.Buffer.isBuffer(r)?r.length:r&&"function"==typeof r.getLengthSync&&r.hasKnownLength&&r.hasKnownLength()?r.getLengthSync():null},$=async(e,{body:r})=>{null===r?e.end():await S(r,e)},x="function"==typeof n.validateHeaderName?n.validateHeaderName:e=>{if(!/^[\^`\-\w!#$%&'*+.|~]+$/.test(e)){let r=TypeError(`Header name must be a valid HTTP token [${e}]`);throw Object.defineProperty(r,"code",{value:"ERR_INVALID_HTTP_TOKEN"}),r}},k="function"==typeof n.validateHeaderValue?n.validateHeaderValue:(e,r)=>{if(/[^\t\u0020-\u007E\u0080-\u00FF]/.test(r)){let r=TypeError(`Invalid character in header content ["${e}"]`);throw Object.defineProperty(r,"code",{value:"ERR_INVALID_CHAR"}),r}};class U extends URLSearchParams{constructor(e){let r=[];if(e instanceof U)for(let[t,n]of Object.entries(e.raw()))r.push(...n.map(e=>[t,e]));else if(null==e);else if("object"!=typeof e||u.types.isBoxedPrimitive(e))throw TypeError("Failed to construct 'Headers': The provided value is not of type '(sequence<sequence<ByteString>> or record<ByteString, ByteString>)");else{let t=e[Symbol.iterator];if(null==t)r.push(...Object.entries(e));else{if("function"!=typeof t)throw TypeError("Header pairs must be iterable");r=[...e].map(e=>{if("object"!=typeof e||u.types.isBoxedPrimitive(e))throw TypeError("Each header pair must be an iterable object");return[...e]}).map(e=>{if(2!==e.length)throw TypeError("Each header pair must be a name/value tuple");return[...e]})}}return super(r=r.length>0?r.map(([e,r])=>(x(e),k(e,String(r)),[String(e).toLowerCase(),String(r)])):void 0),new Proxy(this,{get(e,r,t){switch(r){case"append":case"set":return(t,n)=>(x(t),k(t,String(n)),URLSearchParams.prototype[r].call(e,String(t).toLowerCase(),String(n)));case"delete":case"has":case"getAll":return t=>(x(t),URLSearchParams.prototype[r].call(e,String(t).toLowerCase()));case"keys":return()=>(e.sort(),new Set(URLSearchParams.prototype.keys.call(e)).keys());default:return Reflect.get(e,r,t)}}})}get[Symbol.toStringTag](){return this.constructor.name}toString(){return Object.prototype.toString.call(this)}get(e){let r=this.getAll(e);if(0===r.length)return null;let t=r.join(", ");return/^content-encoding$/i.test(e)&&(t=t.toLowerCase()),t}forEach(e,r){for(let t of this.keys())Reflect.apply(e,r,[this.get(t),t,this])}*values(){for(let e of this.keys())yield this.get(e)}*entries(){for(let e of this.keys())yield[e,this.get(e)]}[Symbol.iterator](){return this.entries()}raw(){return[...this.keys()].reduce((e,r)=>(e[r]=this.getAll(r),e),{})}[Symbol.for("nodejs.util.inspect.custom")](){return[...this.keys()].reduce((e,r)=>{let t=this.getAll(r);return"host"===r?e[r]=t[0]:e[r]=t.length>1?t:t[0],e},{})}}Object.defineProperties(U.prototype,["get","entries","forEach","values"].reduce((e,r)=>(e[r]={enumerable:!0},e),{}));let A=new Set([301,302,303,307,308]),C=e=>A.has(e),j=Symbol("Response internals");class H extends v{constructor(e=null,r={}){super(e,r);let t=null!=r.status?r.status:200,n=new U(r.headers);if(null!==e&&!n.has("Content-Type")){let r=L(e,this);r&&n.append("Content-Type",r)}this[j]={type:"default",url:r.url,status:t,statusText:r.statusText||"",headers:n,counter:r.counter,highWaterMark:r.highWaterMark}}get type(){return this[j].type}get url(){return this[j].url||""}get status(){return this[j].status}get ok(){return this[j].status>=200&&this[j].status<300}get redirected(){return this[j].counter>0}get statusText(){return this[j].statusText}get headers(){return this[j].headers}get highWaterMark(){return this[j].highWaterMark}clone(){return new H(P(this,this.highWaterMark),{type:this.type,url:this.url,status:this.status,statusText:this.statusText,headers:this.headers,ok:this.ok,redirected:this.redirected,size:this.size,highWaterMark:this.highWaterMark})}static redirect(e,r=302){if(!C(r))throw RangeError('Failed to execute "redirect" on "response": Invalid status code');return new H(null,{headers:{location:new URL(e).toString()},status:r})}static error(){let e=new H(null,{status:0,statusText:""});return e[j].type="error",e}static json(e,r={}){let t=JSON.stringify(e);if(void 0===t)throw TypeError("data is not JSON serializable");let n=new U(r&&r.headers);return n.has("content-type")||n.set("content-type","application/json"),new H(t,{...r,headers:n})}get[Symbol.toStringTag](){return"Response"}}Object.defineProperties(H.prototype,{type:{enumerable:!0},url:{enumerable:!0},status:{enumerable:!0},ok:{enumerable:!0},redirected:{enumerable:!0},statusText:{enumerable:!0},headers:{enumerable:!0},clone:{enumerable:!0}});var z=t(73136);let F=e=>{if(e.search)return e.search;let r=e.href.length-1,t=e.hash||("#"===e.href[r]?"#":"");return"?"===e.href[r-t.length]?"?":""};var _=t(77030);function M(e,r=!1){return null==e||(e=new URL(e),/^(about|blob|data):$/.test(e.protocol))?"no-referrer":(e.username="",e.password="",e.hash="",r&&(e.pathname="",e.search=""),e)}let O=new Set(["","no-referrer","no-referrer-when-downgrade","same-origin","origin","strict-origin","origin-when-cross-origin","strict-origin-when-cross-origin","unsafe-url"]);function W(e){if(/^about:(blank|srcdoc)$/.test(e)||"data:"===e.protocol||/^(blob|filesystem):$/.test(e.protocol))return!0;if(/^(http|ws)s:$/.test(e.protocol))return!0;let r=e.host.replace(/(^\[)|(]$)/g,""),t=(0,_.isIP)(r);return!!(4===t&&/^127\./.test(r)||6===t&&/^(((0+:){7})|(::(0+:){0,6}))0*1$/.test(r))||!("localhost"===e.host||e.host.endsWith(".localhost"))&&"file:"===e.protocol}let q=Symbol("Request internals"),I=e=>"object"==typeof e&&"object"==typeof e[q],N=(0,u.deprecate)(()=>{},".data is not a valid RequestInit property, use .body instead","https://github.com/node-fetch/node-fetch/issues/1000 (request)");class D extends v{constructor(e,r={}){let t;if(I(e)?t=new URL(e.url):(t=new URL(e),e={}),""!==t.username||""!==t.password)throw TypeError(`${t} is an url with embedded credentials.`);let n=r.method||e.method||"GET";if(/^(delete|get|head|options|post|put)$/i.test(n)&&(n=n.toUpperCase()),!I(r)&&"data"in r&&N(),(null!=r.body||I(e)&&null!==e.body)&&("GET"===n||"HEAD"===n))throw TypeError("Request with GET/HEAD method cannot have body");let o=r.body?r.body:I(e)&&null!==e.body?P(e):null;super(o,{size:r.size||e.size||0});let s=new U(r.headers||e.headers||{});if(null!==o&&!s.has("Content-Type")){let e=L(o,this);e&&s.set("Content-Type",e)}let i=I(e)?e.signal:null;if("signal"in r&&(i=r.signal),null!=i&&!m(i))throw TypeError("Expected signal to be an instanceof AbortSignal or EventTarget");let a=null==r.referrer?e.referrer:r.referrer;if(""===a)a="no-referrer";else if(a){let e=new URL(a);a=/^about:(\/\/)?client$/.test(e)?"client":e}else a=void 0;this[q]={method:n,redirect:r.redirect||e.redirect||"follow",headers:s,parsedURL:t,signal:i,referrer:a},this.follow=void 0===r.follow?void 0===e.follow?20:e.follow:r.follow,this.compress=void 0===r.compress?void 0===e.compress||e.compress:r.compress,this.counter=r.counter||e.counter||0,this.agent=r.agent||e.agent,this.highWaterMark=r.highWaterMark||e.highWaterMark||16384,this.insecureHTTPParser=r.insecureHTTPParser||e.insecureHTTPParser||!1,this.referrerPolicy=r.referrerPolicy||e.referrerPolicy||""}get method(){return this[q].method}get url(){return(0,z.format)(this[q].parsedURL)}get headers(){return this[q].headers}get redirect(){return this[q].redirect}get signal(){return this[q].signal}get referrer(){return"no-referrer"===this[q].referrer?"":"client"===this[q].referrer?"about:client":this[q].referrer?this[q].referrer.toString():void 0}get referrerPolicy(){return this[q].referrerPolicy}set referrerPolicy(e){this[q].referrerPolicy=function(e){if(!O.has(e))throw TypeError(`Invalid referrerPolicy: ${e}`);return e}(e)}clone(){return new D(this)}get[Symbol.toStringTag](){return"Request"}}Object.defineProperties(D.prototype,{method:{enumerable:!0},url:{enumerable:!0},headers:{enumerable:!0},redirect:{enumerable:!0},clone:{enumerable:!0},signal:{enumerable:!0},referrer:{enumerable:!0},referrerPolicy:{enumerable:!0}});let V=e=>{let{parsedURL:r}=e[q],t=new U(e[q].headers);t.has("Accept")||t.set("Accept","*/*");let n=null;if(null===e.body&&/^(post|put)$/i.test(e.method)&&(n="0"),null!==e.body){let r=B(e);"number"!=typeof r||Number.isNaN(r)||(n=String(r))}n&&t.set("Content-Length",n),""===e.referrerPolicy&&(e.referrerPolicy="strict-origin-when-cross-origin"),e.referrer&&"no-referrer"!==e.referrer?e[q].referrer=function(e,{referrerURLCallback:r,referrerOriginCallback:t}={}){if("no-referrer"===e.referrer||""===e.referrerPolicy)return null;let n=e.referrerPolicy;if("about:client"===e.referrer)return"no-referrer";let o=e.referrer,s=M(o),i=M(o,!0);s.toString().length>4096&&(s=i),r&&(s=r(s)),t&&(i=t(i));let a=new URL(e.url);switch(n){case"no-referrer":return"no-referrer";case"origin":return i;case"unsafe-url":return s;case"strict-origin":if(W(s)&&!W(a))return"no-referrer";return i.toString();case"strict-origin-when-cross-origin":if(s.origin===a.origin)return s;if(W(s)&&!W(a))return"no-referrer";return i;case"same-origin":if(s.origin===a.origin)return s;return"no-referrer";case"origin-when-cross-origin":if(s.origin===a.origin)return s;return i;case"no-referrer-when-downgrade":if(W(s)&&!W(a))return"no-referrer";return s;default:throw TypeError(`Invalid referrerPolicy: ${n}`)}}(e):e[q].referrer="no-referrer",e[q].referrer instanceof URL&&t.set("Referer",e.referrer),t.has("User-Agent")||t.set("User-Agent","node-fetch"),e.compress&&!t.has("Accept-Encoding")&&t.set("Accept-Encoding","gzip, deflate, br");let{agent:o}=e;"function"==typeof o&&(o=o(r));let s=F(r),i={path:r.pathname+s,method:e.method,headers:t[Symbol.for("nodejs.util.inspect.custom")](),insecureHTTPParser:e.insecureHTTPParser,agent:o};return{parsedURL:r,options:i}};class G extends d{constructor(e,r="aborted"){super(e,r)}}var J=t(56177);let K=new Set(["data:","http:","https:"]);async function Y(e,r){return new Promise((t,u)=>{let c=new D(e,r),{parsedURL:f,options:d}=V(c);if(!K.has(f.protocol))throw TypeError(`node-fetch cannot load ${e}. URL scheme "${f.protocol.replace(/:$/,"")}" is not supported.`);if("data:"===f.protocol){let e=(0,l.A)(c.url);t(new H(e,{headers:{"Content-Type":e.typeFull}}));return}let p=("https:"===f.protocol?o:n).request,{signal:y}=c,g=null,m=()=>{let e=new G("The operation was aborted.");u(e),c.body&&c.body instanceof i.Readable&&c.body.destroy(e),g&&g.body&&g.body.emit("error",e)};if(y&&y.aborted)return void m();let S=()=>{m(),v()},T=p(f.toString(),d);y&&y.addEventListener("abort",S);let v=()=>{T.abort(),y&&y.removeEventListener("abort",S)};T.on("error",e=>{u(new h(`request to ${c.url} failed, reason: ${e.message}`,"system",e)),v()}),function(e,r){let t,n=a.Buffer.from("0\r\n\r\n"),o=!1,s=!1;e.on("response",e=>{let{headers:r}=e;o="chunked"===r["transfer-encoding"]&&!r["content-length"]}),e.on("socket",i=>{let l=()=>{if(o&&!s){let e=Error("Premature close");e.code="ERR_STREAM_PREMATURE_CLOSE",r(e)}},u=e=>{(s=0===a.Buffer.compare(e.slice(-5),n))||!t||(s=0===a.Buffer.compare(t.slice(-3),n.slice(0,3))&&0===a.Buffer.compare(e.slice(-2),n.slice(3))),t=e};i.prependListener("close",l),i.on("data",u),e.on("close",()=>{i.removeListener("close",l),i.removeListener("data",u)})})}(T,e=>{g&&g.body&&g.body.destroy(e)}),process.version<"v14"&&T.on("socket",e=>{let r;e.prependListener("end",()=>{r=e._eventsCount}),e.prependListener("close",t=>{if(g&&r<e._eventsCount&&!t){let e=Error("Premature close");e.code="ERR_STREAM_PREMATURE_CLOSE",g.body.emit("error",e)}})}),T.on("response",e=>{T.setTimeout(0);let n=function(e=[]){return new U(e.reduce((e,r,t,n)=>(t%2==0&&e.push(n.slice(t,t+2)),e),[]).filter(([e,r])=>{try{return x(e),k(e,String(r)),!0}catch{return!1}}))}(e.rawHeaders);if(C(e.statusCode)){let o=n.get("Location"),s=null;try{s=null===o?null:new URL(o,c.url)}catch{if("manual"!==c.redirect){u(new h(`uri requested responds with an invalid redirect URL: ${o}`,"invalid-redirect")),v();return}}switch(c.redirect){case"error":u(new h(`uri requested responds with a redirect, redirect mode is set to error: ${c.url}`,"no-redirect")),v();return;case"manual":break;case"follow":{if(null===s)break;if(c.counter>=c.follow){u(new h(`maximum redirect reached at: ${c.url}`,"max-redirect")),v();return}let o={headers:new U(c.headers),follow:c.follow,counter:c.counter+1,agent:c.agent,compress:c.compress,method:c.method,body:P(c),signal:c.signal,size:c.size,referrer:c.referrer,referrerPolicy:c.referrerPolicy};if(!b(c.url,s)||!w(c.url,s))for(let e of["authorization","www-authenticate","cookie","cookie2"])o.headers.delete(e);if(303!==e.statusCode&&c.body&&r.body instanceof i.Readable){u(new h("Cannot follow redirect with body being a readable stream","unsupported-redirect")),v();return}(303===e.statusCode||(301===e.statusCode||302===e.statusCode)&&"POST"===c.method)&&(o.method="GET",o.body=void 0,o.headers.delete("content-length"));let a=function(e){let r=(e.get("referrer-policy")||"").split(/[,\s]+/),t="";for(let e of r)e&&O.has(e)&&(t=e);return t}(n);a&&(o.referrerPolicy=a),t(Y(new D(s,o))),v();return}default:return u(TypeError(`Redirect option '${c.redirect}' is not a valid value of RequestRedirect`))}}y&&e.once("end",()=>{y.removeEventListener("abort",S)});let o=(0,i.pipeline)(e,new i.PassThrough,e=>{e&&u(e)});process.version<"v12.10"&&e.on("aborted",S);let a={url:c.url,status:e.statusCode,statusText:e.statusMessage,headers:n,size:c.size,counter:c.counter,highWaterMark:c.highWaterMark},l=n.get("Content-Encoding");if(!c.compress||"HEAD"===c.method||null===l||204===e.statusCode||304===e.statusCode)return void t(g=new H(o,a));let f={flush:s.Z_SYNC_FLUSH,finishFlush:s.Z_SYNC_FLUSH};if("gzip"===l||"x-gzip"===l)return void t(g=new H(o=(0,i.pipeline)(o,s.createGunzip(f),e=>{e&&u(e)}),a));if("deflate"===l||"x-deflate"===l){let r=(0,i.pipeline)(e,new i.PassThrough,e=>{e&&u(e)});r.once("data",e=>{t(g=new H(o=(15&e[0])==8?(0,i.pipeline)(o,s.createInflate(),e=>{e&&u(e)}):(0,i.pipeline)(o,s.createInflateRaw(),e=>{e&&u(e)}),a))}),r.once("end",()=>{g||t(g=new H(o,a))});return}if("br"===l)return void t(g=new H(o=(0,i.pipeline)(o,s.createBrotliDecompress(),e=>{e&&u(e)}),a));t(g=new H(o,a))}),$(T,c).catch(u)})}}};